# üß© smart-env

> A safer, smarter `.env` manager for Node.js and TypeScript projects.  
> Validate, type, and secure your environment variables ‚Äî with zero hassle.

---

## üöÄ Why smart-env?

Environment variables are critical ‚Äî but `.env` files are easy to mess up.

- Missing keys cause silent runtime errors.  
- Values are often the wrong type (e.g., `"true"` instead of `true`).  
- Secrets can leak accidentally.  
- No type safety in TypeScript.

`smart-env` fixes that with:
- ‚úÖ **Schema validation**
- ‚ö° **TypeScript type generation**
- üîê **Optional encryption**
- üß† **Developer-friendly CLI**

---

## üì¶ Installation

```bash
npm install smart-env
# or
pnpm add smart-env
# or
yarn add smart-env
```

## Usage

### Import and Initialization
```javascript
import { init, getEnv } from './index.js';

// Initialize smart-env (you can pass a config with path if needed)
// await init({ path: './secret-manager' });
await init();
```
> init() merges loaded environment variables into process.env safely. Existing system environment variables take precedence.

### Access enviornment variables safely

```javascript
const s3Key = getEnv("S3_BUCKET");
console.log(s3Key);

const awsKey2 = getEnv("DAMAPIKEY");
console.log(awsKey2);

const isProject = getEnv("ISPROJECT");
console.log(typeof isProject, isProject);

const num = getEnv("NUM");
console.log(typeof num, num);

const num2 = getEnv("NUM2");
console.log(typeof num2, num2);
```
* `getEnv` throws an error immediately if the key was not loaded via init().
* Ensures no silent runtime errors from missing keys.
* `getEnv` will parse booleans or numbers

## Good to Have

üß± MUST-HAVE (MVP)
1. Core Loading & Parsing
* [Done] Load environment variables from .env file (like dotenv)
* [Done] Support comments (#) and quoted values ("value")
* [Done] Parse basic key=value pairs safely
* [Done] Merge with process.env (existing system vars take precedence)
* [Done] Handle multiple .env variants (.env, .env.development, .env.production)
* [Done] Missing keys will not cause silent runtime errors due to `getEnv` function.
* [Done] Typed values are returned by `getEnv` function.

2. Schema Validation
* Define a schema file (.env.schema.json or .env.schema.js)
* Validate types: string, number, boolean, enum, optional
* On validation failure ‚Üí print a friendly error and exit (non-zero code)
* Provide a validateEnv() API for programmatic use
* Example schema (JSON or JS):
```json
{
  "PORT": "number",
  "NODE_ENV": ["development", "production", "test"],
  "API_KEY": "string!"
}
```
3. TypeScript Type Generation
 * Generate a env.d.ts file automatically from schema
 * Types must match schema (autogenerated process.env.PORT: number)
 * CLI command: npx smart-env generate-types
4. CLI Utility
* `npx smart-env validate` ‚Üí validate current env
* `npx smart-env generate-types` ‚Üí regenerate TS definitions
* Pretty, color-coded CLI output (use chalk or kleur)
5. Zero-Config Integration
* Drop-in replacement for dotenv (require('smart-env/config'))
* No runtime dependencies (lightweight, <10KB gzipped)
6. Developer Experience
* Good README with examples and badges
* Basic tests using vitest or jest
* GitHub Actions: lint + test
* MIT License + CONTRIBUTING.md

## Good to Have
These are enhancements that improve developer experience, security, and ecosystem adoption.

1. Security Enhancements
* Support encrypted .env.enc files
* CLI commands: smart-env encrypt / smart-env decrypt
* Encryption key storage via file or passphrase
* Pre-commit Git hook to prevent committing .env files
* Integration with secret managers (e.g., AWS SSM, HashiCorp Vault)
2. Advanced Schema Features
* Nested schemas (DATABASE.HOST, DATABASE.PORT)
* Default values for optional keys
* Regex validation (e.g., email, URL, UUID)
* Custom validators via smart-env.config.js
* Schema inference: auto-generate schema from existing .env
3. Multi-Environment Management
* Load multiple env files with priority (e.g., .env.local > .env)
* Merge environment-specific files (.env.production, .env.dev)
* Command: smart-env load production
* Environment fallback logic (test ‚Üí dev ‚Üí default)
4. Developer Experience & Tooling
* Auto-detect and suggest missing variables on startup
* Pretty summary output (‚úÖ valid keys, ‚ùå missing keys)
* Watch mode to revalidate on file change
* CLI prompts for fixing invalid .env files
* Optional debug mode (SMART_ENV_DEBUG=true)
5. Plugin System
* Plugin API for custom variable loaders (e.g., remote sources)
* smart-env.config.js for plugin registration and overrides
* Example community plugin: @smart-env/aws-ssm
6. Framework Integrations
* Easy integration with:
  * Next.js
  * NestJS
  * Express
  * Fastify
  * Auto-validate env on npm run dev
  * ype-safe imports inside framework projects
7. Editor & Dev Tools Integration
* VSCode extension for .env validation
* Inline hover tooltips for environment variables
* Schema autocompletion inside .env files
8. Performance & Telemetry
* Lazy loading and caching of parsed env files
* Optional telemetry for validation timings
* CLI flag for profiling (--profile)

## Suggested Project Structure
```
smart-env/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # Core loader
‚îÇ   ‚îú‚îÄ‚îÄ cli.ts            # CLI entry point
‚îÇ   ‚îú‚îÄ‚îÄ parser.ts         # .env file parsing logic
‚îÇ   ‚îú‚îÄ‚îÄ validator.ts      # Schema validation
‚îÇ   ‚îú‚îÄ‚îÄ generator.ts      # TypeScript definition generator
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ .env.schema.json
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ REQUIREMENTS.md
‚îî‚îÄ‚îÄ LICENSE
```

## Recommended Dependencies

| Purpose           | Library                                  | Notes                          |
| ----------------- | ---------------------------------------- | ------------------------------ |
| CLI               | `commander` / `yargs`                    | Command-line interface         |
| Colors            | `chalk` / `kleur`                        | Pretty CLI output              |
| Schema validation | `zod` / `valibot`                        | Type-safe validation           |
| Type generation   | `ts-morph` / `json-schema-to-typescript` | Create `env.d.ts`              |
| Testing           | `vitest` / `jest`                        | Automated tests                |
| Linting           | `eslint`, `prettier`                     | Code quality                   |
| CI                | GitHub Actions                           | Auto test and publish pipeline |

## Version RoadMap

| Version     | Focus                | Key Deliverables                                     |
| ----------- | -------------------- | ---------------------------------------------------- |
| **v0.1.0**  | MVP                  | Core loader, schema validation, CLI, type generation |
| **v0.2.0**  | DX & Docs            | CI setup, improved CLI UX, better errors             |
| **v1.0.0**  | First Public Release | Stable API, npm publish, documentation               |
| **v1.1.0+** | Community Features   | Encryption, plugins, VSCode tools                    |





